<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sudoku Game - Dark Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --bg: #181825;
      --panel: #232339;
      --cell: #22223b;
      --cell-highlight: #44446b;
      --cell-selected: #7c7cff;
      --text: #f8f8f2;
      --accent: #9aedfe;
      --error: #ff5555;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
    }
    h1 {
      margin-top: 1.2em;
      color: var(--accent);
      font-size: 2.2em;
      letter-spacing: 2px;
      text-shadow: 0 2px 12px #0006;
    }
    .sudoku-board {
      background: var(--panel);
      border-radius: 12px;
      box-shadow: 0 2px 18px #0009;
      padding: 18px;
      margin: 2em auto;
      display: grid;
      grid-template-columns: repeat(9, 48px);
      grid-template-rows: repeat(9, 48px);
      gap: 2px;
      border: 4px solid var(--cell-selected);
    }
    .cell {
      background: var(--cell);
      color: var(--text);
      font-size: 1.5em;
      text-align: center;
      line-height: 48px;
      border: none;
      outline: none;
      width: 48px;
      height: 48px;
      transition: background 0.15s;
      border-radius: 6px;
      box-sizing: border-box;
      cursor: pointer;
    }
    .cell[readonly], .cell.given {
      background: #232350;
      color: #9aedfe;
      font-weight: bold;
      cursor: default;
    }
    .cell.selected {
      background: var(--cell-selected);
      color: #fff;
    }
    .cell.highlight {
      background: var(--cell-highlight);
    }
    .cell.error {
      background: var(--error);
      color: #fff;
      animation: shake 0.3s;
    }
    @keyframes shake {
      0% { transform: translateX(-3px);}
      25% { transform: translateX(3px);}
      50% { transform: translateX(-2px);}
      75% { transform: translateX(2px);}
      100% { transform: translateX(0);}
    }
    .sudoku-board .cell:nth-child(3n) {
      border-right: 2.5px solid var(--cell-selected);
    }
    .sudoku-board .cell:nth-child(n+19):nth-child(-n+27),
    .sudoku-board .cell:nth-child(n+46):nth-child(-n+54),
    .sudoku-board .cell:nth-child(n+73):nth-child(-n+81) {
      border-bottom: 2.5px solid var(--cell-selected);
    }
    .panel {
      background: var(--panel);
      border-radius: 8px;
      padding: 1em 2em;
      display: flex;
      gap: 1.2em;
      margin-bottom: 1.5em;
      box-shadow: 0 2px 10px #0005;
      align-items: center;
    }
    button, .num-btn {
      background: var(--cell-selected);
      color: #fff;
      border: none;
      padding: 0.8em 1.4em;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      margin: 0 0.3em;
      transition: background 0.18s;
      box-shadow: 0 2px 8px #0003;
    }
    button:hover, .num-btn:hover {
      background: var(--accent);
      color: #222;
    }
    .num-pad {
      display: flex;
      gap: 0.5em;
      justify-content: center;
      margin-bottom: 2em;
    }
    .footer {
      color: #aaa;
      margin: 2em 0 1em 0;
      font-size: 0.95em;
    }
    @media (max-width: 600px) {
      .sudoku-board {
        grid-template-columns: repeat(9, 8vw);
        grid-template-rows: repeat(9, 8vw);
      }
      .cell {
        width: 8vw;
        height: 8vw;
        font-size: 4.5vw;
      }
      .panel {
        flex-direction: column;
        gap: 0.6em;
        padding: 1em;
      }
      .num-pad {
        flex-wrap: wrap;
        gap: 0.3em;
      }
    }
  </style>
</head>
<body>
  <h1>Sudoku (Dark Theme)</h1>
  <div class="panel">
    <button onclick="resetBoard()">Reset</button>
    <button onclick="solveBoard()">Solve</button>
    <span id="status"></span>
  </div>
  <div id="board" class="sudoku-board"></div>
  <div class="num-pad" id="numPad"></div>
  <div class="footer">by Copilot &mdash; dark theme Sudoku, 2025</div>
  <script>
    // A simple Sudoku puzzle (0 = empty)
    const puzzle = [
      [5,3,0, 0,7,0, 0,0,0],
      [6,0,0, 1,9,5, 0,0,0],
      [0,9,8, 0,0,0, 0,6,0],
      [8,0,0, 0,6,0, 0,0,3],
      [4,0,0, 8,0,3, 0,0,1],
      [7,0,0, 0,2,0, 0,0,6],
      [0,6,0, 0,0,0, 2,8,0],
      [0,0,0, 4,1,9, 0,0,5],
      [0,0,0, 0,8,0, 0,7,9]
    ];
    let board = [];
    let selectedCell = null;
    let errorCells = new Set();

    function deepCopy(arr) {
      return arr.map(row => row.slice());
    }

    function createBoard() {
      board = deepCopy(puzzle);
      errorCells.clear();
      const boardDiv = document.getElementById('board');
      boardDiv.innerHTML = '';
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          const cell = document.createElement('input');
          cell.type = "text";
          cell.maxLength = 1;
          cell.className = "cell";
          cell.id = `cell-${row}-${col}`;
          if (puzzle[row][col] !== 0) {
            cell.value = puzzle[row][col];
            cell.readOnly = true;
            cell.classList.add("given");
          }
          cell.addEventListener('focus', () => selectCell(row, col));
          cell.addEventListener('input', e => inputCell(e, row, col));
          cell.addEventListener('keydown', e => handleKey(e, row, col));
          boardDiv.appendChild(cell);
        }
      }
    }

    function selectCell(row, col) {
      if (selectedCell) {
        document.getElementById(selectedCell).classList.remove('selected');
        highlightRelated(selectedCell, false);
      }
      selectedCell = `cell-${row}-${col}`;
      const cell = document.getElementById(selectedCell);
      cell.classList.add('selected');
      highlightRelated(selectedCell, true);
      cell.select();
    }

    function highlightRelated(cellId, add) {
      const [_, row, col] = cellId.split('-').map(Number);
      for (let r = 0; r < 9; r++) {
        document.getElementById(`cell-${r}-${col}`).classList.toggle('highlight', add);
      }
      for (let c = 0; c < 9; c++) {
        document.getElementById(`cell-${row}-${c}`).classList.toggle('highlight', add);
      }
      // Highlight block
      const br = Math.floor(row/3)*3, bc = Math.floor(col/3)*3;
      for (let r = br; r < br+3; r++) {
        for (let c = bc; c < bc+3; c++) {
          document.getElementById(`cell-${r}-${c}`).classList.toggle('highlight', add);
        }
      }
    }

    function inputCell(e, row, col) {
      let v = e.target.value.replace(/[^1-9]/, '');
      e.target.value = v;
      board[row][col] = v ? parseInt(v) : 0;
      checkBoard();
    }

    function handleKey(e, row, col) {
      if (e.key === "ArrowLeft" && col > 0) {
        document.getElementById(`cell-${row}-${col-1}`).focus();
        e.preventDefault();
      }
      if (e.key === "ArrowRight" && col < 8) {
        document.getElementById(`cell-${row}-${col+1}`).focus();
        e.preventDefault();
      }
      if (e.key === "ArrowUp" && row > 0) {
        document.getElementById(`cell-${row-1}-${col}`).focus();
        e.preventDefault();
      }
      if (e.key === "ArrowDown" && row < 8) {
        document.getElementById(`cell-${row+1}-${col}`).focus();
        e.preventDefault();
      }
      if (e.key === "Backspace" || e.key === "Delete") {
        board[row][col] = 0;
        e.target.value = "";
        checkBoard();
      }
    }

    function checkBoard() {
      // Remove all error classes
      document.querySelectorAll('.cell').forEach(cell => cell.classList.remove('error'));
      errorCells.clear();
      // Check conflicts
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          let v = board[row][col];
          if (v === 0) continue;
          // Row
          for (let c = 0; c < 9; c++) {
            if (c !== col && board[row][c] === v) {
              errorCells.add(`cell-${row}-${col}`);
              errorCells.add(`cell-${row}-${c}`);
            }
          }
          // Col
          for (let r = 0; r < 9; r++) {
            if (r !== row && board[r][col] === v) {
              errorCells.add(`cell-${row}-${col}`);
              errorCells.add(`cell-${r}-${col}`);
            }
          }
          // Block
          const br = Math.floor(row/3)*3, bc = Math.floor(col/3)*3;
          for (let r = br; r < br+3; r++) {
            for (let c = bc; c < bc+3; c++) {
              if ((r !== row || c !== col) && board[r][c] === v) {
                errorCells.add(`cell-${row}-${col}`);
                errorCells.add(`cell-${r}-${c}`);
              }
            }
          }
        }
      }
      errorCells.forEach(id => {
        document.getElementById(id)?.classList.add('error');
      });
      if (isComplete() && errorCells.size === 0) {
        document.getElementById('status').textContent = "ðŸŽ‰ Congratulations! Puzzle solved.";
      } else {
        document.getElementById('status').textContent = "";
      }
    }

    function isComplete() {
      for (let row = 0; row < 9; row++)
        for (let col = 0; col < 9; col++)
          if (board[row][col] === 0) return false;
      return true;
    }

    function resetBoard() {
      createBoard();
      document.getElementById('status').textContent = "";
      if (selectedCell) {
        document.getElementById(selectedCell).classList.remove('selected');
        highlightRelated(selectedCell, false);
        selectedCell = null;
      }
    }

    // Sudoku Solver (backtracking)
    function solveBoard() {
      let temp = deepCopy(board);
      if (solve(temp)) {
        board = temp;
        for (let row = 0; row < 9; row++)
          for (let col = 0; col < 9; col++) {
            let cell = document.getElementById(`cell-${row}-${col}`);
            if (!cell.readOnly) cell.value = temp[row][col] || '';
          }
        checkBoard();
        document.getElementById('status').textContent = "Solved!";
      } else {
        document.getElementById('status').textContent = "No solution found.";
      }
    }
    function solve(grid) {
      for (let row = 0; row < 9; row++) {
        for (let col = 0; col < 9; col++) {
          if (grid[row][col] === 0) {
            for (let n = 1; n <= 9; n++) {
              if (isValid(grid, row, col, n)) {
                grid[row][col] = n;
                if (solve(grid)) return true;
                grid[row][col] = 0;
              }
            }
            return false;
          }
        }
      }
      return true;
    }
    function isValid(grid, row, col, n) {
      for (let i = 0; i < 9; i++)
        if (grid[row][i] === n || grid[i][col] === n) return false;
      const br = Math.floor(row/3)*3, bc = Math.floor(col/3)*3;
      for (let r = br; r < br+3; r++)
        for (let c = bc; c < bc+3; c++)
          if (grid[r][c] === n) return false;
      return true;
    }

    // Number pad for mobile/touch input
    function createNumPad() {
      const pad = document.getElementById('numPad');
      pad.innerHTML = '';
      for (let i = 1; i <= 9; i++) {
        const btn = document.createElement('button');
        btn.className = "num-btn";
        btn.textContent = i;
        btn.onclick = () => {
          if (selectedCell && !document.getElementById(selectedCell).readOnly) {
            document.getElementById(selectedCell).value = i;
            const [_, row, col] = selectedCell.split('-').map(Number);
            board[row][col] = i;
            checkBoard();
          }
        };
        pad.appendChild(btn);
      }
      const delBtn = document.createElement('button');
      delBtn.className = "num-btn";
      delBtn.textContent = 'âŒ«';
      delBtn.title = "Delete";
      delBtn.onclick = () => {
        if (selectedCell && !document.getElementById(selectedCell).readOnly) {
          document.getElementById(selectedCell).value = '';
          const [_, row, col] = selectedCell.split('-').map(Number);
          board[row][col] = 0;
          checkBoard();
        }
      };
      pad.appendChild(delBtn);
    }

    createBoard();
    createNumPad();
  </script>
</body>
</html>
